<!DOCTYPE HTML>
<html lang="zh_CN" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Kafka-Architect - 技术架构学习</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><li class="part-title">技术学习笔记</li><li class="chapter-item "><a href="../index.html"><strong aria-hidden="true">1.</strong> 介绍</a></li><li class="chapter-item "><a href="../chapter_0/toc.html"><strong aria-hidden="true">2.</strong> Coding</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_0/admin.html"><strong aria-hidden="true">2.1.</strong> admin</a></li><li class="chapter-item "><a href="../chapter_0/common-design.html"><strong aria-hidden="true">2.2.</strong> common-design</a></li><li class="chapter-item "><a href="../chapter_0/common-elasticsearch.html"><strong aria-hidden="true">2.3.</strong> common-elasticsearch</a></li></ol></li><li class="chapter-item "><a href="../chapter_6/toc.html"><strong aria-hidden="true">3.</strong> Kafka</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_6/notes/Kafka_Day1.html"><strong aria-hidden="true">3.1.</strong> kafka前瞻—架构维度</a></li><li class="chapter-item "><a href="../chapter_6/notes/Kafka_Day2.html"><strong aria-hidden="true">3.2.</strong> kafka安装以及常用的命令</a></li><li class="chapter-item "><a href="../chapter_6/notes/Kafka_Day3.html"><strong aria-hidden="true">3.3.</strong> 基础开发及消费者提交维护offset不同粒度</a></li><li class="chapter-item "><a href="../chapter_6/notes/Kafka_Day4.html"><strong aria-hidden="true">3.4.</strong> ISR，OSR，AR，LW，HW，LEO，ACK原理理论</a></li><li class="chapter-item "><a href="../chapter_6/Book.html"><strong aria-hidden="true">3.5.</strong> Book</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_6/mybook/Kafka-The-Definitive-Guide.html"><strong aria-hidden="true">3.5.1.</strong> Kafka权威指南</a></li><li class="chapter-item "><a href="../chapter_6/mybook/Kafka-The-Definitive-Guide-Overview.html"><strong aria-hidden="true">3.5.2.</strong> ChatGPT写的一篇《Kafka权威指南》总结</a></li><li class="chapter-item "><a href="../chapter_6/mybook/Apache-Kafka-In-Action.html"><strong aria-hidden="true">3.5.3.</strong> Apache Kafka实战</a></li><li class="chapter-item "><a href="../chapter_6/mybook/Deep-Kafka.html"><strong aria-hidden="true">3.5.4.</strong> 深入理解Kafka</a></li><li class="chapter-item "><a href="../chapter_6/mybook/Apache-Kafka-Code.html"><strong aria-hidden="true">3.5.5.</strong> Apache Kafka源码剖析</a></li><li class="chapter-item "><a href="../chapter_6/Kafka.html"><strong aria-hidden="true">3.5.6.</strong> Kafka</a></li><li class="chapter-item "><a href="../chapter_6/Operations.html"><strong aria-hidden="true">3.5.7.</strong> Operations</a></li><li class="chapter-item "><a href="../chapter_6/Streaming.html"><strong aria-hidden="true">3.5.8.</strong> Streaming</a></li></ol></li></ol></li><li class="chapter-item "><a href="../chapter_1/toc.html"><strong aria-hidden="true">4.</strong> Akka</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_1/academy.html"><strong aria-hidden="true">4.1.</strong> Lightbend</a></li><li class="chapter-item "><a href="../chapter_1/akka.html"><strong aria-hidden="true">4.2.</strong> Akka简介</a></li><li class="chapter-item "><a href="../chapter_1/akka-actor.html"><strong aria-hidden="true">4.3.</strong> Akka Actor</a></li><li class="chapter-item "><a href="../chapter_1/akka-remoting.html"><strong aria-hidden="true">4.4.</strong> Akka Remoting</a></li><li class="chapter-item "><a href="../chapter_1/akka-http.html"><strong aria-hidden="true">4.5.</strong> Akka Http</a></li><li class="chapter-item "><a href="../chapter_1/akka-testkit.html"><strong aria-hidden="true">4.6.</strong> Akka TestKit</a></li><li class="chapter-item "><a href="../chapter_1/akka-stream.html"><strong aria-hidden="true">4.7.</strong> Akka Stream</a></li><li class="chapter-item "><a href="../chapter_1/akka-distributed-data.html"><strong aria-hidden="true">4.8.</strong> Akka Distributed Data</a></li><li class="chapter-item "><a href="../chapter_1/akka-cluster.html"><strong aria-hidden="true">4.9.</strong> Akka Cluster</a></li><li class="chapter-item "><a href="../chapter_1/akka-persistence.html"><strong aria-hidden="true">4.10.</strong> Akka Persistence</a></li><li class="chapter-item "><a href="../chapter_1/akka-utilities.html"><strong aria-hidden="true">4.11.</strong> Akka Utilities</a></li><li class="chapter-item "><a href="../chapter_1/Book.html"><strong aria-hidden="true">4.12.</strong> Book</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_1/mybook/akka-in-action.html"><strong aria-hidden="true">4.12.1.</strong> Akka实战</a></li><li class="chapter-item "><a href="../chapter_1/mybook/learning-akka.html"><strong aria-hidden="true">4.12.2.</strong> Akka入门与实践</a></li><li class="chapter-item "><a href="../chapter_1/mybook/applied-akka-patterns.html"><strong aria-hidden="true">4.12.3.</strong> Akka应用模式</a></li><li class="chapter-item "><a href="../chapter_1/mybook/reactive-design-pattern.html"><strong aria-hidden="true">4.12.4.</strong> 反应式设计模式</a></li><li class="chapter-item "><a href="../chapter_1/mybook/reactive-application-development.html"><strong aria-hidden="true">4.12.5.</strong> 反应式应用开发</a></li></ol></li></ol></li><li class="chapter-item "><a href="../chapter_2/toc.html"><strong aria-hidden="true">5.</strong> Consul</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_2/consul.html"><strong aria-hidden="true">5.1.</strong> Consul简介</a></li></ol></li><li class="chapter-item "><a href="../chapter_3/toc.html"><strong aria-hidden="true">6.</strong> Hazelcast</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_3/Hazelcast.html"><strong aria-hidden="true">6.1.</strong> Hazelcast简介</a></li><li class="chapter-item "><a href="../chapter_3/cluster.html"><strong aria-hidden="true">6.2.</strong> Cluster</a></li><li class="chapter-item "><a href="../chapter_3/Distributed-Data-Structures.html"><strong aria-hidden="true">6.3.</strong> Distributed Data Structures</a></li></ol></li><li class="chapter-item "><a href="../chapter_4/toc.html"><strong aria-hidden="true">7.</strong> Jackson</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_4/Jackson.html"><strong aria-hidden="true">7.1.</strong> Jackson简介</a></li></ol></li><li class="chapter-item "><a href="../chapter_5/toc.html"><strong aria-hidden="true">8.</strong> ElasticStack</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_5/elasticsearch.html"><strong aria-hidden="true">8.1.</strong> ElasticSearch</a></li><li class="chapter-item "><a href="../chapter_5/LogStash.html"><strong aria-hidden="true">8.2.</strong> LogStash</a></li><li class="chapter-item "><a href="../chapter_5/kibana.html"><strong aria-hidden="true">8.3.</strong> kibana</a></li><li class="chapter-item "><a href="../chapter_5/beat.html"><strong aria-hidden="true">8.4.</strong> beat</a></li><li class="chapter-item "><a href="../chapter_5/Lucene.html"><strong aria-hidden="true">8.5.</strong> Lucene</a></li><li class="chapter-item "><a href="../chapter_5/Book.html"><strong aria-hidden="true">8.6.</strong> Book</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_5/mybook/elasticsearch-the-definitive-guide.html"><strong aria-hidden="true">8.6.1.</strong> Elasticsearch权威指南</a></li><li class="chapter-item "><a href="../chapter_5/mybook/elasticsearch-in-action.html"><strong aria-hidden="true">8.6.2.</strong> Elasticsearch实战</a></li><li class="chapter-item "><a href="../chapter_5/mybook/mastering-elasticsearch.html"><strong aria-hidden="true">8.6.3.</strong> 深入理解Elasticsearch</a></li><li class="chapter-item "><a href="../chapter_5/mybook/elasticsearch-code.html"><strong aria-hidden="true">8.6.4.</strong> Elasticsearch源码解析与优化实战</a></li></ol></li></ol></li><li class="chapter-item "><a href="../chapter_7/toc.html"><strong aria-hidden="true">9.</strong> Gradle</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_7/gradle.html"><strong aria-hidden="true">9.1.</strong> Gradle简介</a></li><li class="chapter-item "><a href="../chapter_7/Book.html"><strong aria-hidden="true">9.2.</strong> Book</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_7/mybook/gradle-in-action.html"><strong aria-hidden="true">9.2.1.</strong> Gradle实战</a></li></ol></li></ol></li><li class="chapter-item "><a href="../chapter_8/toc.html"><strong aria-hidden="true">10.</strong> Druid</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_8/Druid.html"><strong aria-hidden="true">10.1.</strong> Druid简介</a></li></ol></li><li class="chapter-item "><a href="../chapter_9/toc.html"><strong aria-hidden="true">11.</strong> Spring</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_9/SpringCore.html"><strong aria-hidden="true">11.1.</strong> Spring Core</a></li><li class="chapter-item "><a href="../chapter_9/SpringWebMVC.html"><strong aria-hidden="true">11.2.</strong> Spring WebMVC</a></li><li class="chapter-item "><a href="../chapter_9/SpringTest.html"><strong aria-hidden="true">11.3.</strong> Spring Test</a></li><li class="chapter-item "><a href="../chapter_9/SpringBoot.html"><strong aria-hidden="true">11.4.</strong> Spring Boot</a></li><li class="chapter-item "><a href="../chapter_9/SpringBootAdmin.html"><strong aria-hidden="true">11.5.</strong> Spring Boot Admin</a></li><li class="chapter-item "><a href="../chapter_9/SpringCloudCommon.html"><strong aria-hidden="true">11.6.</strong> Spring Cloud Common</a></li><li class="chapter-item "><a href="../chapter_9/SpringCloudConsul.html"><strong aria-hidden="true">11.7.</strong> Spring Cloud Consul</a></li><li class="chapter-item "><a href="../chapter_9/SpringCloudConfig.html"><strong aria-hidden="true">11.8.</strong> Spring Cloud Config</a></li><li class="chapter-item "><a href="../chapter_9/SpringCloudGateway.html"><strong aria-hidden="true">11.9.</strong> Spring Cloud Gateway</a></li><li class="chapter-item "><a href="../chapter_9/SpringCloudOpenFeign.html"><strong aria-hidden="true">11.10.</strong> Spring Cloud OpenFeign</a></li><li class="chapter-item "><a href="../chapter_9/SpringIntegration.html"><strong aria-hidden="true">11.11.</strong> Spring Integration</a></li><li class="chapter-item "><a href="../chapter_9/SpringOthers.html"><strong aria-hidden="true">11.12.</strong> Spring Others</a></li><li class="chapter-item "><a href="../chapter_9/Book.html"><strong aria-hidden="true">11.13.</strong> Book</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_9/mybook/spring-in-action-4th.html"><strong aria-hidden="true">11.13.1.</strong> Spring实战第四版</a></li><li class="chapter-item "><a href="../chapter_9/mybook/springboot-internals.html"><strong aria-hidden="true">11.13.2.</strong> SpringBoot解密</a></li></ol></li></ol></li><li class="chapter-item "><a href="../chapter_10/toc.html"><strong aria-hidden="true">12.</strong> KVStore</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_10/Redis.html"><strong aria-hidden="true">12.1.</strong> Redis</a></li><li class="chapter-item "><a href="../chapter_10/MapDB.html"><strong aria-hidden="true">12.2.</strong> MapDB</a></li></ol></li><li class="chapter-item "><a href="../chapter_11/toc.html"><strong aria-hidden="true">13.</strong> 分布式事务</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_11/atomikos.html"><strong aria-hidden="true">13.1.</strong> atomikos</a></li><li class="chapter-item "><a href="../chapter_11/seata.html"><strong aria-hidden="true">13.2.</strong> seata</a></li><li class="chapter-item "><a href="../chapter_11/Book.html"><strong aria-hidden="true">13.3.</strong> Book</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_11/mybook/deeping-in-dtx.html"><strong aria-hidden="true">13.3.1.</strong> 深入理解分布式事务</a></li><li class="chapter-item "><a href="../chapter_11/mybook/seata-in-action.html"><strong aria-hidden="true">13.3.2.</strong> 正本清源分布式事务之Seata</a></li></ol></li></ol></li><li class="chapter-item "><a href="../chapter_12/toc.html"><strong aria-hidden="true">14.</strong> Library</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_12/httpcomponents.html"><strong aria-hidden="true">14.1.</strong> Apache-httpcomponents</a></li><li class="chapter-item "><a href="../chapter_12/Logback.html"><strong aria-hidden="true">14.2.</strong> Logback</a></li><li class="chapter-item "><a href="../chapter_12/poi.html"><strong aria-hidden="true">14.3.</strong> Apache-poi</a></li><li class="chapter-item "><a href="../chapter_12/sse.html"><strong aria-hidden="true">14.4.</strong> Server-Sent-Events</a></li><li class="chapter-item "><a href="../chapter_12/dom4j.html"><strong aria-hidden="true">14.5.</strong> dom4j</a></li><li class="chapter-item "><a href="../chapter_12/lombok.html"><strong aria-hidden="true">14.6.</strong> lombok</a></li><li class="chapter-item "><a href="../chapter_12/logstash-logback-encoder.html"><strong aria-hidden="true">14.7.</strong> logstash-logback-encoder</a></li><li class="chapter-item "><a href="../chapter_12/jmx.html"><strong aria-hidden="true">14.8.</strong> jmx</a></li><li class="chapter-item "><a href="../chapter_12/unit-test.html"><strong aria-hidden="true">14.9.</strong> 单元测试</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_12/unit-test/junit5.html"><strong aria-hidden="true">14.9.1.</strong> junit5</a></li><li class="chapter-item "><a href="../chapter_12/unit-test/assertj.html"><strong aria-hidden="true">14.9.2.</strong> assertj</a></li><li class="chapter-item "><a href="../chapter_12/unit-test/mockito.html"><strong aria-hidden="true">14.9.3.</strong> mockito</a></li><li class="chapter-item "><a href="../chapter_12/unit-test/jacoco.html"><strong aria-hidden="true">14.9.4.</strong> jacoco</a></li></ol></li><li class="chapter-item "><a href="../chapter_12/Book.html"><strong aria-hidden="true">14.10.</strong> Book</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_12/mybook/effective-unit-testing.html"><strong aria-hidden="true">14.10.1.</strong> 有效的单元测试</a></li></ol></li></ol></li><li class="chapter-item "><a href="../chapter_13/toc.html"><strong aria-hidden="true">15.</strong> Database</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_13/mysql.html"><strong aria-hidden="true">15.1.</strong> MySQL</a></li><li class="chapter-item "><a href="../chapter_13/redis.html"><strong aria-hidden="true">15.2.</strong> Redis</a></li><li class="chapter-item "><a href="../chapter_13/mongdb.html"><strong aria-hidden="true">15.3.</strong> Mongdb</a></li><li class="chapter-item "><a href="../chapter_13/canal.html"><strong aria-hidden="true">15.4.</strong> Canal</a></li><li class="chapter-item "><a href="../chapter_13/Doris.html"><strong aria-hidden="true">15.5.</strong> Doris</a></li></ol></li><li class="chapter-item "><a href="../chapter_14/toc.html"><strong aria-hidden="true">16.</strong> 运维</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_14/Tracing.html"><strong aria-hidden="true">16.1.</strong> Tracing</a></li><li class="chapter-item "><a href="../chapter_14/Monitoring.html"><strong aria-hidden="true">16.2.</strong> Monitoring</a></li><li class="chapter-item "><a href="../chapter_14/Logging.html"><strong aria-hidden="true">16.3.</strong> Logging</a></li><li class="chapter-item "><a href="../chapter_14/rancher.html"><strong aria-hidden="true">16.4.</strong> rancher</a></li><li class="chapter-item "><a href="../chapter_14/kubernetes.html"><strong aria-hidden="true">16.5.</strong> kubernetes</a></li><li class="chapter-item "><a href="../chapter_14/harbor.html"><strong aria-hidden="true">16.6.</strong> harbor</a></li></ol></li><li class="chapter-item "><a href="../chapter_15/toc.html"><strong aria-hidden="true">17.</strong> Research</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chapter_15/aws.html"><strong aria-hidden="true">17.1.</strong> aws</a></li><li class="chapter-item "><a href="../chapter_15/aliyun.html"><strong aria-hidden="true">17.2.</strong> aliyun</a></li><li class="chapter-item "><a href="../chapter_15/Replication.html"><strong aria-hidden="true">17.3.</strong> Replication</a></li><li class="chapter-item "><a href="../chapter_15/Partitioning.html"><strong aria-hidden="true">17.4.</strong> Partitioning</a></li><li class="chapter-item "><a href="../chapter_15/StorageEngine.html"><strong aria-hidden="true">17.5.</strong> StorageEngine</a></li><li class="chapter-item "><a href="../chapter_15/Network-partition.html"><strong aria-hidden="true">17.6.</strong> Network Partition</a></li><li class="chapter-item "><a href="../chapter_15/Transaction.html"><strong aria-hidden="true">17.7.</strong> Transaction</a></li><li class="chapter-item "><a href="../chapter_15/Index.html"><strong aria-hidden="true">17.8.</strong> Index</a></li><li class="chapter-item "><a href="../chapter_15/ResiliencyPatterns.html"><strong aria-hidden="true">17.9.</strong> ResiliencyPatterns</a></li><li class="chapter-item "><a href="../chapter_15/ServiceRegistry.html"><strong aria-hidden="true">17.10.</strong> ServiceRegistry</a></li><li class="chapter-item "><a href="../chapter_15/Person.html"><strong aria-hidden="true">17.11.</strong> Person</a></li></ol></li><li class="chapter-item expanded "><a href="../tech-sharing/toc.html"><strong aria-hidden="true">18.</strong> 技术分享</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech-sharing/Kafka-Architect.html" class="active"><strong aria-hidden="true">18.1.</strong> Kafka-Architect</a></li></ol></li><li class="chapter-item "><a href="../reference/reference.html"><strong aria-hidden="true">19.</strong> 参考资料</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../reference/reference.html"><strong aria-hidden="true">19.1.</strong> 参考资料</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">技术架构学习</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/alongsoCJR/tech-learning" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="kafka-architect"><a class="header" href="#kafka-architect">Kafka-Architect</a></h1>
<h2 id="内容列表"><a class="header" href="#内容列表">内容列表</a></h2>
<h4 id="kafka引入"><a class="header" href="#kafka引入">kafka引入</a></h4>
<h4 id="akf原则"><a class="header" href="#akf原则">AKF原则</a></h4>
<h4 id="kafka架构"><a class="header" href="#kafka架构">kafka架构</a></h4>
<h4 id="可靠性"><a class="header" href="#可靠性">可靠性</a></h4>
<h2 id="kafka引入-1"><a class="header" href="#kafka引入-1">kafka引入</a></h2>
<p>kafka是什么？</p>
<p><a href="https://kafka.apache.org/">官网介绍</a></p>
<blockquote>
<p>Apache Kafka is an open-source distributed event streaming platform used by thousands of companies for high-performance data pipelines, streaming analytics, data integration, and mission-critical applications.</p>
</blockquote>
<p><a href="https://developer.confluent.io/what-is-apache-kafka/">confluent介绍</a></p>
<blockquote>
<p>Apache Kafka is an event streaming platform used to collect, process, store, and integrate data at scale. It has numerous use cases including distributed streaming, stream processing, data integration, and pub/sub messaging.</p>
</blockquote>
<p>重点：不只是分布式消息<strong>中间件</strong>，还是分布式流式消息（事件）处理<strong>平台</strong></p>
<p><img src="image/kafka的系统演进.jpg" alt="kafka的系统演进" /></p>
<p>单体到分布式，引入的问题：可靠性、可扩展性、高性能</p>
<h2 id="akf原则-1"><a class="header" href="#akf原则-1">AKF原则</a></h2>
<p>AKF 立方体也叫做scala cube，它在《The Art of Scalability》一书中被首次提出，旨在提供一个系统化的扩展思路。AKF 把系统扩展分为以下三个维度：</p>
<ul>
<li>X 轴：直接水平复制应用进程来扩展系统。（比如单体服务，但部署时一发动全身）</li>
<li>Y 轴：将功能拆分出来扩展系统。（拆分微服务，但好的业务迟早会遇见数据瓶颈）</li>
<li>Z 轴：基于用户信息扩展系统。（数据分区，比如分库分表）</li>
</ul>
<p><img src="image/分布式AKF原则.jpg" alt="分布式AKF原则" /></p>
<h3 id="kafka-akf分析"><a class="header" href="#kafka-akf分析"><a href="https://cloud.tencent.com/developer/article/1975148">Kafka AKF分析</a></a></h3>
<p>x轴，对parttion进行副本备份，副本（理论上可以读写分离，但容易出现一致性问题，干脆只能在主P上进行读写）</p>
<p>y轴：topic，不同的业务使用不同topic</p>
<p>z轴：partiton，对无关的数据打散到不同的分片，分而治之。将相关的数据按顺序聚合到同一个分片</p>
<h3 id="kafka数据处理思路"><a class="header" href="#kafka数据处理思路">Kafka数据处理思路</a></h3>
<p>无关的数据，必然分治——&gt;无关的数据就分散到不同的分区里，以追求并发并行</p>
<p>有关的数据，聚合——&gt; 有关的数据，一定要按原有顺序发送到同一分区里</p>
<p>分区内部有序，分区外部无序</p>
<h2 id="kafka架构-1"><a class="header" href="#kafka架构-1">kafka架构</a></h2>
<p>核心组件：<strong>Zookeeper</strong>、<strong>Broker</strong>、<strong>Topic</strong>、<strong>Partition</strong>、<strong>Producer</strong>、<strong>Consumer</strong>、<strong>Consumer Group</strong></p>
<h3 id="zookeeper"><a class="header" href="#zookeeper">Zookeeper</a></h3>
<p>单机管理-&gt;主从集群   分布式协调，zk不用于存储（相当于服务网关，负责路由转发）</p>
<p>旧版本</p>
<blockquote>
<p>producer是通过zookeeper获取集群节点信息的，zk除了是个协调以外，还是个存储DB，offset是维护在zookeeper当中</p>
</blockquote>
<p>新老版本的区别</p>
<blockquote>
<p>角色之间通信，在业务层次上不再依赖zookeeper（减少zk的负载），只是个协调</p>
</blockquote>
<p>元数据Metadata：topic，partition，broker</p>
<h3 id="kafka架构图"><a class="header" href="#kafka架构图">kafka架构图</a></h3>
<p><img src="image/整个架构.jpg" alt="整个架构" /></p>
<h3 id="核心组件的关系"><a class="header" href="#核心组件的关系">核心组件的关系</a></h3>
<p>broker与zookeeper的关系？</p>
<p>broker与partition的关系？</p>
<p>controller是个啥？</p>
<h3 id="创建一个topic的过程"><a class="header" href="#创建一个topic的过程">创建一个topic的过程</a></h3>
<p><img src="image/kafka创建topic内部结构.jpg" alt="kafka创建topic内部结构" /></p>
<h3 id="producer"><a class="header" href="#producer">Producer</a></h3>
<p>在并发情况下，注意一致性（顺序性保证）的问题</p>
<pre><code class="language-sql">lock() { 
		sql
		producer.produce()
} unlock();

</code></pre>
<p>数据保存在哪里？</p>
<p>kafka的broker的partition里</p>
<h3 id="consumer"><a class="header" href="#consumer">Consumer</a></h3>
<p>consumer与patition的关系：1:n/ 1:1</p>
<p>思考，consumer与patition的关系n:1可不可以? 
破坏有序性</p>
<h3 id="group"><a class="header" href="#group">group</a></h3>
<p>不同业务组之间，需要消费同一topic的数据，可以使用不同的group</p>
<p>在单一的使用场景下，先要保证，即便追求性能，用多个consumer，应该注意，不能一个分区由多个consumer消费</p>
<p>数据的重复利用是站在group上</p>
<h3 id="offset"><a class="header" href="#offset">offset</a></h3>
<p>比如consumer重启，会不会导致数据重复消费和丢失，围绕的是消费的进度offset</p>
<p>起初consumer在runtime里维护自身的consumer</p>
<p>旧版本的offset是通过consumer与zookeeper通信维护的</p>
<p>新版kafka能自己维护offset</p>
<p>offset持久化节奏，频率，先后？</p>
<p>两大问题：</p>
<ol>
<li>丢失</li>
<li>重复消费</li>
</ol>
<p>异步的：每间隔5s，先处理业务逻辑，异步提交offset，重复消费</p>
<p>同步的：处理业务逻辑，同步提交offset</p>
<p>Consume流程没处理好，提交offset在业务逻辑处理之前，导致丢失</p>
<p>hbase,es,myisam顺序写</p>
<p>新版offset的维护</p>
<p>consumer-&gt;broker(runtime)-&gt;mem metadata-&gt;磁盘，持久层</p>
<h2 id="可靠性-1"><a class="header" href="#可靠性-1">可靠性</a></h2>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../tech-sharing/toc.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../reference/reference.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../tech-sharing/toc.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../reference/reference.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../mermaid.min.js"></script>
        <script type="text/javascript" src="../mermaid-init.js"></script>
        <script type="text/javascript" src="../smart-anchor.js"></script>
        <script src="https://utteranc.es/client.js"
        repo="RustMagazine/rust_magazine_2021"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async></script>

    </body>
</html>
